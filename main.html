<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neighborhood Hide and Seek Game Tracker</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        text-align: center;
        color: white;
        margin-bottom: 30px;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .game-setup {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .budget-section {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        border: 2px solid #e9ecef;
      }

      .budget-section h3 {
        margin-bottom: 15px;
        color: #007bff;
        text-align: center;
      }

      .budget-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
        margin-bottom: 15px;
      }

      .budget-option {
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 8px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
      }

      .budget-option:hover {
        border-color: #007bff;
        transform: translateY(-2px);
      }

      .budget-option.selected {
        border-color: #007bff;
        background: #e3f2fd;
        color: #007bff;
        font-weight: bold;
      }

      .budget-number {
        font-size: 1.2rem;
        font-weight: bold;
      }

      .budget-label {
        font-size: 0.8rem;
        color: #666;
        margin-top: 2px;
      }

      .budget-option.selected .budget-label {
        color: #007bff;
      }

      .custom-budget {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-top: 10px;
      }

      .custom-budget input {
        width: 80px;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        text-align: center;
      }

      .teams-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .team-card {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        border: 2px solid #e9ecef;
      }

      .team-card.seekers {
        border-color: #dc3545;
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
      }

      .team-card.hiders {
        border-color: #28a745;
        background: linear-gradient(135deg, #f0fff4 0%, #e6ffed 100%);
      }

      .team-card h3 {
        margin-bottom: 15px;
        font-size: 1.3rem;
      }

      .team-card.seekers h3 {
        color: #dc3545;
      }

      .team-card.hiders h3 {
        color: #28a745;
      }

      .player-input {
        display: flex;
        margin-bottom: 10px;
      }

      .player-input input {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin-right: 10px;
      }

      .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-primary {
        background: #007bff;
        color: white;
      }

      .btn-primary:hover {
        background: #0056b3;
        transform: translateY(-2px);
      }

      .btn-success {
        background: #28a745;
        color: white;
      }

      .btn-success:hover {
        background: #1e7e34;
      }

      .btn-danger {
        background: #dc3545;
        color: white;
      }

      .btn-danger:hover {
        background: #c82333;
      }

      .btn-small {
        padding: 4px 8px;
        font-size: 0.8rem;
      }

      .game-controls {
        text-align: center;
        margin: 20px 0;
      }

      .game-status {
        text-align: center;
        margin: 20px 0;
        padding: 15px;
        border-radius: 10px;
        font-weight: bold;
        font-size: 1.1rem;
      }

      .status-setup {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
      }

      .status-active {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .questions-container {
        display: none;
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .questions-container.active {
        display: block;
      }

      .category-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .tab {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        background: #f8f9fa;
        color: #666;
      }

      .tab.active {
        background: #007bff;
        color: white;
        transform: translateY(-2px);
      }

      .category-content {
        display: none;
      }

      .category-content.active {
        display: block;
      }

      .question-item {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
        border-left: 5px solid #007bff;
        transition: all 0.3s ease;
      }

      .question-item:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .question-item.used {
        background: #fff5f5;
        border-left-color: #dc3545;
        opacity: 0.7;
      }

      .question-item.cooldown {
        background: #fff3cd;
        border-left-color: #ffc107;
      }

      .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .question-title {
        font-weight: bold;
        color: #007bff;
      }

      .question-cost {
        background: #007bff;
        color: white;
        padding: 4px 8px;
        border-radius: 15px;
        font-size: 0.8rem;
      }

      .question-details {
        color: #666;
        margin-bottom: 10px;
      }

      .question-actions {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .cooldown-timer {
        font-size: 0.9rem;
        color: #ffc107;
        font-weight: bold;
      }

      .game-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .stat-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: bold;
        color: #007bff;
      }

      .stat-label {
        color: #666;
        margin-top: 5px;
      }

      .end-game-section {
        text-align: center;
        margin: 20px 0;
      }

      .btn-warning {
        background: #ffc107;
        color: #212529;
      }

      .btn-warning:hover {
        background: #e0a800;
      }

      .game-summary {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin-top: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        display: none;
      }

      .game-summary.active {
        display: block;
      }

      .summary-header {
        text-align: center;
        margin-bottom: 20px;
      }

      .summary-header h2 {
        color: #28a745;
        margin-bottom: 10px;
      }

      .summary-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .summary-stat {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
      }

      .summary-stat-number {
        font-size: 1.5rem;
        font-weight: bold;
        color: #007bff;
      }

      .summary-stat-label {
        color: #666;
        font-size: 0.9rem;
      }

      .player-list {
        list-style: none;
      }

      .player-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px 0;
        border-bottom: 1px solid #eee;
      }

      .player-item:last-child {
        border-bottom: none;
      }

      @media (max-width: 768px) {
        .teams-section {
          grid-template-columns: 1fr;
        }

        .category-tabs {
          justify-content: center;
        }

        .tab {
          font-size: 0.9rem;
          padding: 8px 12px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üèòÔ∏è Neighborhood Hide and Seek Tracker</h1>
        <p>Manage teams, track questions, and monitor your suburban game</p>
      </div>

      <div class="game-setup" id="gameSetup">
        <h2>Game Setup</h2>

        <div class="budget-section">
          <h3>üí∞ Seeker Coin Budget</h3>
          <div class="budget-options">
            <div
              class="budget-option selected"
              onclick="selectBudget(250, this)">
              <div class="budget-number">250</div>
              <div class="budget-label">Hard</div>
            </div>
            <div class="budget-option" onclick="selectBudget(400, this)">
              <div class="budget-number">400</div>
              <div class="budget-label">Medium</div>
            </div>
            <div class="budget-option" onclick="selectBudget(600, this)">
              <div class="budget-number">600</div>
              <div class="budget-label">Easy</div>
            </div>
            <div class="budget-option" onclick="selectBudget(999, this)">
              <div class="budget-number">‚àû</div>
              <div class="budget-label">Unlimited</div>
            </div>
          </div>
          <div class="custom-budget">
            <span>Custom:</span>
            <input
              type="number"
              id="customBudget"
              placeholder="300"
              min="50"
              max="999" />
            <button
              class="btn btn-primary btn-small"
              onclick="setCustomBudget()">
              Set
            </button>
          </div>
        </div>

        <div class="teams-section">
          <div class="team-card seekers">
            <h3>üîç Seekers Team</h3>
            <div class="player-input">
              <input
                type="text"
                id="seekerInput"
                placeholder="Enter seeker name" />
              <button
                class="btn btn-danger btn-small"
                onclick="addPlayer('seekers')">
                Add
              </button>
            </div>
            <ul class="player-list" id="seekersList"></ul>
          </div>

          <div class="team-card hiders">
            <h3>üôà Hiders Team</h3>
            <div class="player-input">
              <input
                type="text"
                id="hiderInput"
                placeholder="Enter hider name" />
              <button
                class="btn btn-success btn-small"
                onclick="addPlayer('hiders')">
                Add
              </button>
            </div>
            <ul class="player-list" id="hidersList"></ul>
          </div>
        </div>

        <div class="game-controls">
          <button class="btn btn-primary" onclick="startGame()">
            Start Game
          </button>
          <button class="btn btn-danger" onclick="resetGame()">
            Reset All
          </button>
        </div>
      </div>

      <div class="game-status" id="gameStatus">
        <div class="status-setup">Set up teams to begin the game</div>
      </div>

      <div class="questions-container" id="questionsContainer">
        <h2>Question Categories</h2>

        <div class="end-game-section">
          <button class="btn btn-warning" onclick="endGame()">
            üéØ End Game (Hiders Found!)
          </button>
          <button class="btn btn-danger" onclick="resetGame()">
            Reset Game
          </button>
        </div>

        <div class="category-tabs">
          <button class="tab active" onclick="showCategory('relative')">
            Relative (25-30 coins)
          </button>
          <button class="tab" onclick="showCategory('radar')">
            Radar (20 coins)
          </button>
          <button class="tab" onclick="showCategory('photos')">
            Photos (15 coins)
          </button>
          <button class="tab" onclick="showCategory('oddball')">
            Oddball (10 coins)
          </button>
          <button class="tab" onclick="showCategory('precision')">
            Precision (10 coins)
          </button>
        </div>

        <div id="relative" class="category-content active"></div>
        <div id="radar" class="category-content"></div>
        <div id="photos" class="category-content"></div>
        <div id="oddball" class="category-content"></div>
        <div id="precision" class="category-content"></div>
      </div>

      <div class="game-stats" id="gameStats" style="display: none">
        <div class="stat-card">
          <div class="stat-number" id="remainingBudget">250</div>
          <div class="stat-label">Coins Remaining</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="totalCost">0</div>
          <div class="stat-label">Coins Spent</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="questionsAsked">0</div>
          <div class="stat-label">Questions Asked</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="questionsRemaining">39</div>
          <div class="stat-label">Questions Remaining</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="gameTime">00:00</div>
          <div class="stat-label">Game Time</div>
        </div>
      </div>

      <div class="game-summary" id="gameSummary">
        <div class="summary-header">
          <h2>üéâ Game Complete!</h2>
          <p>The hiders have been found! Here's your game summary:</p>
        </div>

        <div class="summary-stats">
          <div class="summary-stat">
            <div class="summary-stat-number" id="finalTime">00:00</div>
            <div class="summary-stat-label">Total Time</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-number" id="finalQuestions">0</div>
            <div class="summary-stat-label">Questions Asked</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-number" id="finalCost">0</div>
            <div class="summary-stat-label">Total Cost</div>
          </div>
          <div class="summary-stat">
            <div class="summary-stat-number" id="efficiency">0</div>
            <div class="summary-stat-label">Efficiency Score</div>
          </div>
        </div>

        <div style="text-align: center">
          <button class="btn btn-primary" onclick="playAgain()">
            Play Again
          </button>
          <button class="btn btn-danger" onclick="resetGame()">
            Reset Teams
          </button>
        </div>
      </div>
    </div>

    <script>
      // Game state
      let gameState = {
        isActive: false,
        startTime: null,
        seekers: [],
        hiders: [],
        usedQuestions: new Set(),
        categoryLastUsed: {},
        totalCost: 0,
        gameTimer: null,
        startingBudget: 250,
        remainingBudget: 250,
      };

      // Questions data - Suburban-scale with metric system
      const questions = {
        relative: [
          {
            id: "north",
            title: "North/South",
            details: "Are you north or south of us?",
            cost: 25,
          },
          {
            id: "east",
            title: "East/West",
            details: "Are you east or west of us?",
            cost: 25,
          },
          {
            id: "elevation",
            title: "Higher/Lower Ground",
            details: "Are you on higher or lower ground than us?",
            cost: 25,
          },
          {
            id: "suburb",
            title: "Same Suburb",
            details: "Are you in the same suburb/neighborhood as us?",
            cost: 30,
          },
          {
            id: "postcode",
            title: "Same Postcode",
            details: "Are you in the same postcode as us?",
            cost: 30,
          },
          {
            id: "busstop",
            title: "Same Bus Route",
            details: "Does the same bus route service your location?",
            cost: 25,
          },
          {
            id: "shopping",
            title: "Shopping Center",
            details: "Is your nearest shopping center the same as ours?",
            cost: 25,
          },
        ],
        radar: [
          {
            id: "r25m",
            title: "25 Metres",
            details: "Are you within 25 metres of here?",
            cost: 20,
          },
          {
            id: "r50m",
            title: "50 Metres",
            details: "Are you within 50 metres of here?",
            cost: 20,
          },
          {
            id: "r100m",
            title: "100 Metres",
            details: "Are you within 100 metres of here?",
            cost: 20,
          },
          {
            id: "r200m",
            title: "200 Metres",
            details: "Are you within 200 metres of here?",
            cost: 20,
          },
          {
            id: "r500m",
            title: "500 Metres",
            details: "Are you within 500 metres of here?",
            cost: 20,
          },
          {
            id: "r1km",
            title: "1 Kilometre",
            details: "Are you within 1 kilometre of here?",
            cost: 20,
          },
          {
            id: "rcustom",
            title: "Custom Distance",
            details: "Are you within [specify distance] metres of here?",
            cost: 20,
          },
        ],
        photos: [
          {
            id: "tallest",
            title: "Tallest Building/Structure",
            details:
              "Send a photo of the tallest building or structure you can see",
            cost: 15,
          },
          {
            id: "water",
            title: "Nearest Water Feature",
            details:
              "Send a photo of the nearest pond, creek, or water feature",
            cost: 15,
          },
          {
            id: "park",
            title: "Nearest Park",
            details: "Send a photo of the nearest park or green space",
            cost: 15,
          },
          {
            id: "shop",
            title: "Nearest Shop",
            details: "Send a photo of the nearest shop or business",
            cost: 15,
          },
          {
            id: "playground",
            title: "Playground Equipment",
            details:
              "Send a photo of playground equipment or sports facilities",
            cost: 15,
          },
          {
            id: "streetsign",
            title: "Street Sign",
            details: "Send a photo of the closest street sign",
            cost: 15,
          },
          {
            id: "vehicles",
            title: "3 Different Vehicles",
            details: "Send a photo showing at least 3 different vehicles",
            cost: 15,
          },
        ],
        oddball: [
          {
            id: "pet",
            title: "Find a Pet",
            details: "Video call us until you show us a dog, cat, or other pet",
            cost: 10,
          },
          {
            id: "walk",
            title: "Walking Route",
            details:
              "Send a map/screenshot of yourself walking 200m in any direction",
            cost: 10,
          },
          {
            id: "ambient",
            title: "Ambient Sound",
            details: "Send 30 seconds of audio from your current location",
            cost: 10,
          },
          {
            id: "bustime",
            title: "Next Bus",
            details:
              'What time is the next bus at your nearest bus stop? (or say "no bus stop nearby")',
            cost: 10,
          },
          {
            id: "rhyme",
            title: "Street Name Rhyme",
            details:
              "Send us three words that rhyme with your current street name",
            cost: 10,
          },
          {
            id: "counting",
            title: "Count Something",
            details:
              "Count and tell us how many street lamps you can see from where you are",
            cost: 10,
          },
        ],
        precision: [
          {
            id: "housenumber",
            title: "Nearest House Number",
            details: "What is the nearest visible house/building number?",
            cost: 10,
          },
          {
            id: "walktime",
            title: "Walk to Main Road",
            details:
              "How many minutes would it take to walk to the nearest main road?",
            cost: 10,
          },
          {
            id: "intersection",
            title: "Distance to Intersection",
            details:
              "Approximately how many metres are you from the nearest intersection?",
            cost: 10,
          },
          {
            id: "footpath",
            title: "Distance to Footpath",
            details:
              "How many metres are you from the nearest footpath/sidewalk?",
            cost: 10,
          },
          {
            id: "streetletter",
            title: "Street Name First Letter",
            details:
              "What is the first letter of the street you are closest to?",
            cost: 10,
          },
          {
            id: "streettype",
            title: "Street Type",
            details:
              "Is your nearest street a Road, Street, Avenue, Court, or other? (be specific)",
            cost: 10,
          },
          {
            id: "selfie",
            title: "Selfie",
            details: "Send a picture of yourself",
            cost: 10,
          },
          {
            id: "skyview",
            title: "Sky Photo",
            details: "Send a photo looking directly up at the sky",
            cost: 10,
          },
          {
            id: "samestreet",
            title: "Same Street",
            details: "Are you on the same street as us?",
            cost: 10,
          },
          {
            id: "trees",
            title: "Tree Count",
            details: "How many trees can you see from your current position?",
            cost: 10,
          },
        ],
      };

      // Budget management functions
      function selectBudget(amount, element) {
        // Remove selected class from all options
        document.querySelectorAll(".budget-option").forEach((option) => {
          option.classList.remove("selected");
        });

        // Add selected class to clicked option
        element.classList.add("selected");

        // Update game state
        gameState.startingBudget = amount;
        gameState.remainingBudget = amount;

        // Clear custom input
        document.getElementById("customBudget").value = "";
      }

      function setCustomBudget() {
        const customInput = document.getElementById("customBudget");
        const amount = parseInt(customInput.value);

        if (!amount || amount < 50) {
          alert("Please enter a budget of at least 50 coins");
          return;
        }

        // Remove selected class from preset options
        document.querySelectorAll(".budget-option").forEach((option) => {
          option.classList.remove("selected");
        });

        // Update game state
        gameState.startingBudget = amount;
        gameState.remainingBudget = amount;

        alert(`Custom budget set to ${amount} coins`);
      }

      // Team management functions
      function addPlayer(team) {
        const input = document.getElementById(
          team === "seekers" ? "seekerInput" : "hiderInput"
        );
        const name = input.value.trim();

        if (name) {
          gameState[team].push(name);
          input.value = "";
          renderTeams();
        }
      }

      function removePlayer(team, index) {
        gameState[team].splice(index, 1);
        renderTeams();
      }

      function renderTeams() {
        const seekersList = document.getElementById("seekersList");
        const hidersList = document.getElementById("hidersList");

        seekersList.innerHTML = gameState.seekers
          .map(
            (name, index) =>
              `<li class="player-item">
                    <span>${name}</span>
                    <button class="btn btn-danger btn-small" onclick="removePlayer('seekers', ${index})">Remove</button>
                </li>`
          )
          .join("");

        hidersList.innerHTML = gameState.hiders
          .map(
            (name, index) =>
              `<li class="player-item">
                    <span>${name}</span>
                    <button class="btn btn-success btn-small" onclick="removePlayer('hiders', ${index})">Remove</button>
                </li>`
          )
          .join("");
      }

      // Game control functions
      function startGame() {
        if (gameState.seekers.length === 0 || gameState.hiders.length === 0) {
          alert("Please add at least one player to each team!");
          return;
        }

        gameState.isActive = true;
        gameState.startTime = Date.now();

        document.getElementById("gameSetup").style.display = "none";
        document.getElementById("questionsContainer").classList.add("active");
        document.getElementById("gameStats").style.display = "grid";
        document.getElementById("gameSummary").classList.remove("active");

        updateGameStatus();
        startGameTimer();
      }

      function endGame() {
        if (!gameState.isActive) {
          alert("No active game to end!");
          return;
        }

        if (confirm("End the game? The hiders have been found!")) {
          gameState.isActive = false;

          if (gameState.gameTimer) {
            clearInterval(gameState.gameTimer);
          }

          showGameSummary();

          document
            .getElementById("questionsContainer")
            .classList.remove("active");
          document.getElementById("gameStats").style.display = "none";
          document.getElementById("gameSummary").classList.add("active");

          updateGameStatus();
        }
      }

      function playAgain() {
        // Keep teams but reset game data
        gameState.isActive = false;
        gameState.startTime = null;
        gameState.usedQuestions = new Set();
        gameState.categoryLastUsed = {};
        gameState.totalCost = 0;
        gameState.gameTimer = null;
        gameState.remainingBudget = gameState.startingBudget; // Reset budget

        document.getElementById("gameSummary").classList.remove("active");
        document.getElementById("questionsContainer").classList.add("active");
        document.getElementById("gameStats").style.display = "grid";

        renderQuestions();
        updateGameStats();
        startGame();
      }

      function showGameSummary() {
        const gameEndTime = Date.now();
        const totalTime = gameEndTime - gameState.startTime;
        const minutes = Math.floor(totalTime / 60000);
        const seconds = Math.floor((totalTime % 60000) / 1000);
        const questionsAsked = gameState.usedQuestions.size;

        // Calculate efficiency score (lower is better)
        const efficiencyScore = Math.max(
          100 - questionsAsked * 2 - Math.floor(totalTime / 60000),
          0
        );

        document.getElementById("finalTime").textContent = `${minutes
          .toString()
          .padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
        document.getElementById("finalQuestions").textContent = questionsAsked;
        document.getElementById("finalCost").textContent = gameState.totalCost;
        document.getElementById("efficiency").textContent = efficiencyScore;
      }

      function resetGame() {
        if (
          confirm(
            "Are you sure you want to reset the entire game and clear all teams?"
          )
        ) {
          gameState = {
            isActive: false,
            startTime: null,
            seekers: [],
            hiders: [],
            usedQuestions: new Set(),
            categoryLastUsed: {},
            totalCost: 0,
            gameTimer: null,
          };

          document.getElementById("gameSetup").style.display = "block";
          document
            .getElementById("questionsContainer")
            .classList.remove("active");
          document.getElementById("gameStats").style.display = "none";
          document.getElementById("gameSummary").classList.remove("active");

          renderTeams();
          renderQuestions();
          updateGameStatus();
          updateGameStats();

          if (gameState.gameTimer) {
            clearInterval(gameState.gameTimer);
          }
        }
      }

      function startGameTimer() {
        gameState.gameTimer = setInterval(() => {
          updateGameTime();
          updateCooldowns();
        }, 1000);
      }

      function updateGameTime() {
        if (!gameState.isActive || !gameState.startTime) return;

        const elapsed = Date.now() - gameState.startTime;
        const minutes = Math.floor(elapsed / 60000);
        const seconds = Math.floor((elapsed % 60000) / 1000);

        document.getElementById("gameTime").textContent = `${minutes
          .toString()
          .padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
      }

      function updateGameStatus() {
        const statusDiv = document.getElementById("gameStatus");

        if (!gameState.isActive) {
          statusDiv.innerHTML =
            '<div class="status-setup">Set up teams to begin the game</div>';
        } else {
          statusDiv.innerHTML = `
                    <div class="status-active">
                        Game Active - Seekers: ${gameState.seekers.join(
                          ", "
                        )} | 
                        Hiders: ${gameState.hiders.join(", ")}
                    </div>
                `;
        }
      }

      // Question management functions
      function renderQuestions() {
        Object.keys(questions).forEach((category) => {
          const container = document.getElementById(category);
          container.innerHTML = questions[category]
            .map((question) => {
              const isUsed = gameState.usedQuestions.has(question.id);
              const isOnCooldown = isCategoryOnCooldown(category);

              return `
                        <div class="question-item ${isUsed ? "used" : ""} ${
                isOnCooldown && !isUsed ? "cooldown" : ""
              }" id="q-${question.id}">
                            <div class="question-header">
                                <div class="question-title">${
                                  question.title
                                }</div>
                                <div class="question-cost">${
                                  question.cost
                                } coins</div>
                            </div>
                            <div class="question-details">${
                              question.details
                            }</div>
                            <div class="question-actions">
                                ${
                                  !isUsed
                                    ? `
                                    <button class="btn btn-primary btn-small" 
                                            onclick="askQuestion('${
                                              question.id
                                            }', '${category}', ${
                                        question.cost
                                      })"
                                            ${
                                              isOnCooldown ||
                                              (gameState.startingBudget !==
                                                999 &&
                                                gameState.remainingBudget <
                                                  question.cost)
                                                ? "disabled"
                                                : ""
                                            }>
                                        ${
                                          gameState.startingBudget !== 999 &&
                                          gameState.remainingBudget <
                                            question.cost
                                            ? "Not Enough Coins"
                                            : "Ask Question"
                                        }
                                    </button>
                                `
                                    : '<span style="color: #dc3545; font-weight: bold;">USED</span>'
                                }
                                ${
                                  isOnCooldown && !isUsed
                                    ? `
                                    <span class="cooldown-timer" id="cooldown-${category}">
                                        Category on cooldown
                                    </span>
                                `
                                    : ""
                                }
                            </div>
                        </div>
                    `;
            })
            .join("");
        });
      }

      function askQuestion(questionId, category, cost) {
        if (!gameState.isActive) {
          alert("Game is not active!");
          return;
        }

        if (gameState.usedQuestions.has(questionId)) {
          alert("This question has already been asked!");
          return;
        }

        if (isCategoryOnCooldown(category)) {
          alert("This category is on cooldown!");
          return;
        }

        // Check if there are enough coins (unless unlimited budget)
        if (
          gameState.startingBudget !== 999 &&
          gameState.remainingBudget < cost
        ) {
          alert(
            `Not enough coins! You need ${cost} coins but only have ${gameState.remainingBudget} remaining.`
          );
          return;
        }

        if (confirm(`Ask this question for ${cost} coins?`)) {
          gameState.usedQuestions.add(questionId);
          gameState.categoryLastUsed[category] = Date.now();
          gameState.totalCost += cost;

          // Deduct coins (unless unlimited)
          if (gameState.startingBudget !== 999) {
            gameState.remainingBudget -= cost;
          }

          renderQuestions();
          updateGameStats();

          // Check if out of coins
          if (
            gameState.startingBudget !== 999 &&
            gameState.remainingBudget <= 0
          ) {
            alert("‚ö†Ô∏è Out of coins! You must end the game or the hiders win!");
          }
        }
      }

      function isCategoryOnCooldown(category) {
        if (!gameState.categoryLastUsed[category]) return false;

        const timeSinceLastUse =
          Date.now() - gameState.categoryLastUsed[category];
        return timeSinceLastUse < 30 * 60 * 1000; // 30 minutes
      }

      function updateCooldowns() {
        Object.keys(gameState.categoryLastUsed).forEach((category) => {
          const cooldownElement = document.getElementById(
            `cooldown-${category}`
          );
          if (cooldownElement) {
            const timeSinceLastUse =
              Date.now() - gameState.categoryLastUsed[category];
            const remainingTime = 30 * 60 * 1000 - timeSinceLastUse;

            if (remainingTime > 0) {
              const minutes = Math.floor(remainingTime / 60000);
              const seconds = Math.floor((remainingTime % 60000) / 1000);
              cooldownElement.textContent = `Cooldown: ${minutes}:${seconds
                .toString()
                .padStart(2, "0")}`;
            } else {
              renderQuestions(); // Re-render to remove cooldown
            }
          }
        });
      }

      function showCategory(categoryName) {
        // Update tabs
        document
          .querySelectorAll(".tab")
          .forEach((tab) => tab.classList.remove("active"));
        event.target.classList.add("active");

        // Update content
        document
          .querySelectorAll(".category-content")
          .forEach((content) => content.classList.remove("active"));
        document.getElementById(categoryName).classList.add("active");
      }

      function updateGameStats() {
        const totalQuestions = Object.values(questions).reduce(
          (sum, category) => sum + category.length,
          0
        );
        const questionsAsked = gameState.usedQuestions.size;
        const questionsRemaining = totalQuestions - questionsAsked;

        document.getElementById("questionsAsked").textContent = questionsAsked;
        document.getElementById("totalCost").textContent = gameState.totalCost;
        document.getElementById("questionsRemaining").textContent =
          questionsRemaining;

        // Update budget display
        if (gameState.startingBudget === 999) {
          document.getElementById("remainingBudget").textContent = "‚àû";
        } else {
          document.getElementById("remainingBudget").textContent =
            gameState.remainingBudget;

          // Change color if running low on coins
          const budgetElement = document.getElementById("remainingBudget");
          if (gameState.remainingBudget <= 50) {
            budgetElement.style.color = "#dc3545"; // Red
          } else if (gameState.remainingBudget <= 100) {
            budgetElement.style.color = "#ffc107"; // Yellow
          } else {
            budgetElement.style.color = "#007bff"; // Blue
          }
        }
      }

      // Initialize the app
      function init() {
        renderQuestions();
        updateGameStats();
      }

      // Event listeners and initialization
      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("seekerInput")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") addPlayer("seekers");
          });

        document
          .getElementById("hiderInput")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") addPlayer("hiders");
          });

        init();
      });
    </script>
  </body>
</html>
